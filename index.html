<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Faculdade Santo Agostinho - Sistema de Controle</title>
<style>
  body { font-family: Arial, sans-serif; background: #e6f0ff; margin: 0; padding: 0; }
  h2 { color: #003366; }
  .tabs { display: flex; background: #004d99; }
  .tab { flex: 1; padding: 15px; color: white; text-align: center; cursor: pointer; }
  .tab.active { background: #0066cc; }
  .content { display: none; padding: 20px; }
  .content.active { display: block; }
  table { width: 100%; border-collapse: collapse; margin-top: 10px; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
  th { background: #cce0ff; }
  button { background: #0066cc; color: white; border: none; padding: 6px 10px; cursor: pointer; border-radius: 5px; }
  button:hover { background: #004d99; }
  .remove-btn { background: #cc0000; }
  .remove-btn:hover { background: #990000; }
</style>
</head>
<body>

<h2>üéì Sistema da Faculdade Santo Agostinho</h2>

<div class="tabs">
  <div class="tab active" onclick="mostrarAba('pessoas')">Pessoas</div>
  <div class="tab" onclick="mostrarAba('equipamentos')">Equipamentos</div>
  <div class="tab" onclick="mostrarAba('emprestimos')">Empr√©stimos</div>
</div>

<!-- üßç Aba Pessoas -->
<div id="pessoas" class="content active">
  <h3>Registrar Pessoa</h3>
  <input id="nome" placeholder="Nome">
  <input id="telefone" placeholder="Telefone">
  <input id="cpf" placeholder="CPF">
  <input id="curso" placeholder="Curso">
  <button onclick="registrarPessoa()">Registrar</button>

  <h3>Lista de Pessoas</h3>
  <table id="tabelaPessoas">
    <thead>
      <tr><th>Nome</th><th>Telefone</th><th>CPF</th><th>Curso</th><th>A√ß√µes</th></tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- üíª Aba Equipamentos -->
<div id="equipamentos" class="content">
  <h3>Registrar Equipamento</h3>
  <input id="nomeEquipamento" placeholder="Nome do Equipamento">
  <input id="patrimonio" placeholder="N√∫mero de Patrim√¥nio">
  <button onclick="registrarEquipamento()">Registrar</button>

  <h3>Lista de Equipamentos</h3>
  <table id="tabelaEquipamentos">
    <thead>
      <tr><th>Nome</th><th>Patrim√¥nio</th><th>Status</th><th>A√ß√µes</th></tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- üì¶ Aba Empr√©stimos -->
<div id="emprestimos" class="content">
  <h3>Registrar Empr√©stimo</h3>
  <select id="alunoEmprestimo"></select>
  <select id="equipEmprestimo"></select>
  <button onclick="registrarEmprestimo()">Emprestar</button>

  <h3>Registrar Devolu√ß√£o</h3>
  <select id="devolucaoSelect"></select>
  <button onclick="registrarDevolucao()">Devolver</button>

  <h3>Hist√≥rico de Empr√©stimos</h3>
  <table id="tabelaEmprestimos">
    <thead>
      <tr><th>Equipamento</th><th>Aluno</th><th>Curso</th><th>Status</th><th>Empr√©stimo</th><th>Devolu√ß√£o</th></tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
let dados = JSON.parse(localStorage.getItem("faculdadeDados")) || { pessoas: [], equipamentos: [], emprestimos: [] };

function salvar() { localStorage.setItem("faculdadeDados", JSON.stringify(dados)); }

function atualizarTabelas() {
  const tabelaPessoas = document.querySelector("#tabelaPessoas tbody");
  const tabelaEquip = document.querySelector("#tabelaEquipamentos tbody");
  const tabelaEmp = document.querySelector("#tabelaEmprestimos tbody");
  const selectAluno = document.getElementById("alunoEmprestimo");
  const selectEquip = document.getElementById("equipEmprestimo");
  const selectDevolucao = document.getElementById("devolucaoSelect");

  tabelaPessoas.innerHTML = "";
  dados.pessoas.forEach(p => {
    const linha = `<tr>
      <td>${p.nome}</td><td>${p.telefone}</td><td>${p.cpf}</td><td>${p.curso}</td>
      <td><button class='remove-btn' onclick="removerPessoa('${p.nome}')">üóëÔ∏è Remover</button></td></tr>`;
    tabelaPessoas.innerHTML += linha;
  });

  tabelaEquip.innerHTML = "";
  dados.equipamentos.forEach(e => {
    const linha = `<tr>
      <td>${e.nome}</td><td>${e.patrimonio}</td><td>${e.status}</td>
      <td><button class='remove-btn' onclick="removerEquipamento('${e.nome}')">üóëÔ∏è Remover</button></td></tr>`;
    tabelaEquip.innerHTML += linha;
  });

  tabelaEmp.innerHTML = "";
  dados.emprestimos.forEach(emp => {
    tabelaEmp.innerHTML += `<tr>
      <td>${emp.equipamento}</td><td>${emp.aluno}</td><td>${emp.curso}</td>
      <td>${emp.status}</td><td>${emp.dataEmprestimo}</td><td>${emp.dataDevolucao || "---"}</td></tr>`;
  });

  selectAluno.innerHTML = "<option value=''>Selecione o aluno</option>" +
    dados.pessoas.map(p => `<option>${p.nome}</option>`).join("");
  selectEquip.innerHTML = "<option value=''>Selecione o equipamento</option>" +
    dados.equipamentos.filter(e => e.status === "No Arm√°rio").map(e => `<option>${e.nome}</option>`).join("");
  selectDevolucao.innerHTML = "<option value=''>Selecione o empr√©stimo</option>" +
    dados.emprestimos.filter(e => e.status === "Emprestado").map(e => `<option>${e.equipamento} (${e.aluno})</option>`).join("");
}

function registrarPessoa() {
  const nome = nomeInput.value, telefone = telefoneInput.value, cpf = cpfInput.value, curso = cursoInput.value;
  if (!nome || !telefone || !cpf || !curso) return alert("Preencha todos os campos!");
  dados.pessoas.push({ nome, telefone, cpf, curso });
  salvar(); atualizarTabelas();
  nomeInput.value = telefoneInput.value = cpfInput.value = cursoInput.value = "";
  alert("Pessoa registrada com sucesso!");
}

function registrarEquipamento() {
  const nome = nomeEquipamento.value, patrimonio = patrimonioInput.value;
  if (!nome || !patrimonio) return alert("Preencha todos os campos!");
  dados.equipamentos.push({ nome, patrimonio, status: "No Arm√°rio" });
  salvar(); atualizarTabelas();
  nomeEquipamento.value = patrimonioInput.value = "";
  alert("Equipamento registrado com sucesso!");
}

function registrarEmprestimo() {
  const aluno = alunoEmprestimo.value, equipamento = equipEmprestimo.value;
  if (!aluno || !equipamento) return alert("Selecione aluno e equipamento!");
  const pessoa = dados.pessoas.find(p => p.nome === aluno);
  const eqp = dados.equipamentos.find(e => e.nome === equipamento);
  if (eqp.status === "Emprestado") return alert("Este equipamento j√° est√° emprestado!");
  eqp.status = "Emprestado";
  dados.emprestimos.push({
    aluno, curso: pessoa.curso, equipamento,
    dataEmprestimo: new Date().toLocaleString("pt-BR"),
    dataDevolucao: "", status: "Emprestado"
  });
  salvar(); atualizarTabelas();
  alert("Empr√©stimo registrado com sucesso!");
}

function registrarDevolucao() {
  const sel = devolucaoSelect.value;
  if (!sel) return alert("Selecione um empr√©stimo!");
  const emp = dados.emprestimos.find(e => `${e.equipamento} (${e.aluno})` === sel);
  const eqp = dados.equipamentos.find(e => e.nome === emp.equipamento);
  emp.status = "Devolvido";
  emp.dataDevolucao = new Date().toLocaleString("pt-BR");
  eqp.status = "No Arm√°rio";
  salvar(); atualizarTabelas();
  alert("Devolu√ß√£o registrada com sucesso!");
}

function removerPessoa(nome) {
  if (confirm(`Deseja realmente remover ${nome}?`)) {
    dados.pessoas = dados.pessoas.filter(p => p.nome !== nome);
    salvar(); atualizarTabelas();
    alert("Pessoa removida!");
  }
}

function removerEquipamento(nome) {
  const eqp = dados.equipamentos.find(e => e.nome === nome);
  if (eqp.status === "Emprestado") return alert("N√£o √© poss√≠vel remover um equipamento emprestado!");
  if (confirm(`Deseja realmente remover o equipamento ${nome}?`)) {
    dados.equipamentos = dados.equipamentos.filter(e => e.nome !== nome);
    salvar(); atualizarTabelas();
    alert("Equipamento removido!");
  }
}

function mostrarAba(nome) {
  document.querySelectorAll(".tab, .content").forEach(e => e.classList.remove("active"));
  document.querySelector(`.tab[onclick*='${nome}']`).classList.add("active");
  document.getElementById(nome).classList.add("active");
}

const nomeInput = document.getElementById("nome");
const telefoneInput = document.getElementById("telefone");
const cpfInput = document.getElementById("cpf");
const cursoInput = document.getElementById("curso");
const nomeEquipamento = document.getElementById("nomeEquipamento");
const patrimonioInput = document.getElementById("patrimonio");

atualizarTabelas();
</script>
</body>
</html>
